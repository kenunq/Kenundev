{% extends 'base.html' %}
{% load static %}

{% block head %}
<link rel="stylesheet" href="{% static 'services.css' %}">
{% endblock %}

{% block content %}
<div class="main">
    <div class="serv_header">
        <p>Предварительная запись</p>
    </div>

    <div class="serv_content">
        <div class="block_left">
            <div class="field_name">
                <p>Тип услуги:</p>
                <p>Сервер:</p>
                <p>Сторона:</p>
                <p>Класс:</p>
            </div>
            <div class="field_input">
                <div class="set_value" onclick="content_block_show('type', 1)">
                    <p>Выбрать</p>
                    <img src="{% static 'img/other/white_triangle.png' %}" width="17" height="17" id="tringle1">
                </div>
                <div class="set_value" onclick="content_block_show('server', 2)">
                    <p>Выбрать</p>
                    <img src="{% static 'img/other/white_triangle.png' %}" width="17" height="17" id="tringle2">
                </div>
                <div class="set_value" onclick="content_block_show('fraction', 3)">
                    <p>Выбрать</p>
                    <img src="{% static 'img/other/white_triangle.png' %}" width="17" height="17" id="tringle3">
                </div>
                <div class="set_value" onclick="content_block_show('class', 4)">
                    <p>Выбрать</p>
                    <img src="{% static 'img/other/white_triangle.png' %}" width="17" height="17" id="tringle4">
                </div>
            </div>
        </div>
        <div class="block_right">
            <div class="field_name">
                <p>Ментор:</p>
                <p>Способ связи:</p>
                <p>Имя пользователя:</p>
            </div>
            <div class="field_input">
                <div class="set_value" onclick="content_block_show('mentor', 5)">
                    <p>Выбрать</p>
                    <img src="{% static 'img/other/white_triangle.png' %}" width="17" height="17" id="tringle5">
                </div>
                <div class="set_value" onclick="content_block_show('communication', 6)">
                    <p>Выбрать</p>
                    <img src="{% static 'img/other/white_triangle.png' %}" width="17" height="17" id="tringle6">
                </div>
                <div class="username-input" id="username-input">
                    <input type="text" id="input-username">
                </div>
            </div>
        </div>
        <div class="content_block" open="False" id="type">
            <div class="content_obj">
                <p>123</p>
            </div>
            <div class="content_obj">
                <p>123</p>
            </div>
            <div class="content_obj">
                <p>123</p>
            </div>
        </div>
        <div class="content_block" open="False" id="server">
            <div class="content_obj">
                <p>123</p>
            </div>
            <div class="content_obj">
                <p>123</p>
            </div>
            <div class="content_obj">
                <p>123</p>
            </div>
        </div>
        <div class="content_block" open="False" id="fraction">
        <div class="content_obj">
                <p>123</p>
            </div>
            <div class="content_obj">
                <p>123</p>
            </div>
            <div class="content_obj">
                <p>123</p>
            </div>
        </div>
        <div class="content_block" open="False" id="class">
            <div class="content_obj">
                <p>123</p>
            </div>
            <div class="content_obj">
                <p>123</p>
            </div>
            <div class="content_obj">
                <p>123</p>
            </div>
        </div>
        <div class="content_block" open="False" id="mentor">
          <div class="content_obj">
                <p>123</p>
            </div>
            <div class="content_obj">
                <p>123</p>
            </div>
            <div class="content_obj">
                <p>123</p>
            </div>
        </div>
        <div class="content_block" open="False" id="communication">
          <div class="content_obj">
                <p>123</p>
            </div>
            <div class="content_obj">
                <p>123</p>
            </div>
            <div class="content_obj">
                <p>123</p>
            </div>
        </div>
    </div>

    <div class="additional_comment">
        <p>Доп. коментарий</p>
        <div class="comment-input" id="comment-input">
            <textarea type="text" id="input-comment"></textarea>
        </div>
    </div>

    <div class="send_button" onclick="sendRequest()">
        <p>Записаться</p>
    </div>
</div>
{% endblock %}

{% block js %}
<script>

    function content_block_show(block_id, tringle_id){
        var obj = document.querySelector(`#${block_id}`)
        //obj.style.display = "block";
        var attr = obj.getAttribute("open")
        if(attr == "False"){
            rotate_tringle(0, tringle_id);
            obj.setAttribute("open", "True")
            obj.style.display = "block"
        }

        if(attr == "True"){
            rotate_tringle(180, tringle_id);
            obj.setAttribute("open", "False")
            obj.style.display = "none"
        }
    }

   function rotate_tringle(d, tringle_id){
        var d= d;
        if(d == 0){
            var rotate_interval = setInterval(function w(){
            if(d == 180){
                clearInterval(rotate_interval);
            };
            document.getElementById(`tringle${tringle_id}`).style['-webkit-transform']= `rotate(${d + "deg"})`;
            d +=3;
            },4);
        };

        if(d == 180){
            var rotate_interval = setInterval(function w(){
            if(d == 360){
                clearInterval(rotate_interval);
            }
            document.getElementById(`tringle${tringle_id}`).style['-webkit-transform']= `rotate(${d + "deg"})`;
            d +=3;
            },4);
        };
    };

</script>
{% endblock %}